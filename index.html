<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PC F√∫tbol Manager 2025/26</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --primary: #ff6b35; --secondary: #0a0e27; --tertiary: #1a1a2e; --success: #00ff64; --danger: #ff3b3b; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, var(--secondary) 0%, var(--tertiary) 100%); color: #fff; }
        .navbar { background: rgba(10, 14, 39, 0.95); border-bottom: 3px solid var(--primary); padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; sticky top: 0; z-index: 100; }
        .navbar-brand { font-size: 1.5em; font-weight: bold; color: var(--primary); }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .main-grid { display: grid; grid-template-columns: 220px 1fr; gap: 20px; }
        .sidebar { background: rgba(26, 26, 46, 0.8); border: 1px solid var(--primary); border-radius: 10px; padding: 20px; height: fit-content; position: sticky; top: 80px; }
        .sidebar h3 { color: var(--primary); margin: 15px 0 10px 0; font-size: 0.85em; text-transform: uppercase; }
        .sidebar-btn { width: 100%; padding: 10px; background: rgba(255, 107, 53, 0.1); border: 1px solid rgba(255, 107, 53, 0.3); color: #fff; border-radius: 5px; cursor: pointer; margin-bottom: 8px; text-align: left; font-size: 0.9em; }
        .sidebar-btn:hover, .sidebar-btn.active { background: rgba(255, 107, 53, 0.4); border-color: var(--primary); }
        .content { background: rgba(26, 26, 46, 0.6); border: 1px solid rgba(255, 107, 53, 0.2); border-radius: 10px; padding: 30px; }
        .section { display: none; }
        .section.active { display: block; }
        h1 { color: var(--primary); margin-bottom: 20px; }
        h2 { color: var(--primary); margin: 20px 0 15px 0; border-bottom: 2px solid var(--primary); padding-bottom: 10px; }
        .btn { background: linear-gradient(135deg, var(--primary), #ff8c42); color: white; padding: 12px 20px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; transition: all 0.3s; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(255,107,53,0.3); }
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0; }
        .card { background: rgba(255, 107, 53, 0.08); border: 1px solid rgba(255, 107, 53, 0.3); padding: 20px; border-radius: 8px; }
        .card-title { color: var(--primary); font-weight: bold; margin-bottom: 10px; }
        .card-value { font-size: 2em; font-weight: bold; color: var(--success); margin: 10px 0; }
        .card-value.negative { color: var(--danger); }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid rgba(255, 107, 53, 0.2); }
        th { background: rgba(255, 107, 53, 0.2); color: var(--primary); font-weight: bold; }
        input, select { background: rgba(0,0,0,0.3); border: 1px solid rgba(255, 107, 53, 0.3); color: #fff; padding: 10px; border-radius: 5px; }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-content { background: var(--tertiary); padding: 30px; border-radius: 10px; border: 2px solid var(--primary); max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto; }
        .modal-close { float: right; font-size: 2em; cursor: pointer; color: var(--primary); }
        .player-card { background: rgba(255, 107, 53, 0.08); border: 1px solid rgba(255, 107, 53, 0.3); padding: 15px; border-radius: 8px; margin: 10px 0; }
        .player-info { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.9em; }
        .stat-row { display: flex; justify-content: space-between; padding: 8px 0; }
        .alert { padding: 15px; border-radius: 5px; margin: 15px 0; display: none; }
        .alert.active { display: block; }
        .alert-warning { background: rgba(255, 170, 0, 0.1); border: 1px solid #ffaa00; color: #ffaa00; }
        @media (max-width: 1024px) { .main-grid { grid-template-columns: 1fr; } .grid-3 { grid-template-columns: repeat(2, 1fr); } }
    </style>
</head>
<body>
    <div class="navbar">
        <div class="navbar-brand">‚öΩ PC F√öTBOL MANAGER 2025/26</div>
        <div style="display: flex; gap: 20px; align-items: center;">
            <div style="background: rgba(255, 107, 53, 0.2); padding: 5px 15px; border-radius: 20px;">
                <span id="navTeam">Selecciona equipo</span> | Jornada <span id="navWeek">1</span>
            </div>
            <button class="btn" onclick="showModal('newGame')" style="padding: 8px 15px; font-size: 0.9em;">Nuevo Juego</button>
        </div>
    </div>
    
    <div class="container">
        <div class="main-grid">
            <div class="sidebar">
                <h3>MEN√ö</h3>
                <button class="sidebar-btn active" onclick="switchSection('dashboard')">üìä Dashboard</button>
                <button class="sidebar-btn" onclick="switchSection('squad')">üë• Plantilla</button>
                <button class="sidebar-btn" onclick="switchSection('transfers')">üîÑ Fichajes</button>
                <button class="sidebar-btn" onclick="switchSection('tactics')">üéØ T√°cticas</button>
                
                <h3>GESTI√ìN</h3>
                <button class="sidebar-btn" onclick="switchSection('finance')">üíº Finanzas</button>
                <button class="sidebar-btn" onclick="switchSection('facilities')">üèüÔ∏è Instalaciones</button>
                <button class="sidebar-btn" onclick="switchSection('staff')">üëî Staff</button>
                
                <h3>COMPETICI√ìN</h3>
                <button class="sidebar-btn" onclick="switchSection('match')">‚öΩ Partido</button>
                <button class="sidebar-btn" onclick="switchSection('standings')">üìà Clasificaci√≥n</button>
                
                <h3>SISTEMA</h3>
                <button class="sidebar-btn" onclick="switchSection('gamemode')">üéÆ Modo</button>
                <button class="sidebar-btn" onclick="switchSection('settings')">‚öôÔ∏è Opciones</button>
            </div>
            
            <div class="content">
                <!-- DASHBOARD -->
                <div id="dashboard" class="section active">
                    <h1>üìä Dashboard</h1>
                    <div class="alert alert-warning" id="warningAlert"></div>
                    <div class="grid-3">
                        <div class="card">
                            <div class="card-title">Posici√≥n</div>
                            <div class="card-value" id="dashPos">-</div>
                            <div style="color: #aaa; font-size: 0.9em;">de 20 equipos</div>
                        </div>
                        <div class="card">
                            <div class="card-title">Puntos</div>
                            <div class="card-value" id="dashPts">0</div>
                            <div style="color: #aaa; font-size: 0.9em;">PJ: <span id="dashPJ">0</span></div>
                        </div>
                        <div class="card">
                            <div class="card-title">Balance</div>
                            <div class="card-value" id="dashBalance">0‚Ç¨</div>
                            <div style="color: #aaa; font-size: 0.9em;">Patrimonio</div>
                        </div>
                    </div>
                    <h2>Estado del Club</h2>
                    <table>
                        <tr>
                            <td style="width: 50%;">Jugadores en Plantilla:</td>
                            <td id="dashPlayers">0</td>
                        </tr>
                        <tr>
                            <td>Goles esta Temporada:</td>
                            <td id="dashGoals">0</td>
                        </tr>
                        <tr>
                            <td>√öltimos 5 Partidos:</td>
                            <td id="dashForm">-</td>
                        </tr>
                    </table>
                </div>
                
                <!-- PLANTILLA -->
                <div id="squad" class="section">
                    <h1>üë• Plantilla</h1>
                    <button class="btn" onclick="showModal('signPlayer')">+ Fichar Jugador</button>
                    <div id="squadList" style="margin-top: 20px;"></div>
                </div>
                
                <!-- FICHAJES -->
                <div id="transfers" class="section">
                    <h1>üîÑ Fichajes</h1>
                    <div class="grid-2">
                        <div>
                            <h2>Mercado Disponible</h2>
                            <div id="transferMarket"></div>
                        </div>
                        <div>
                            <h2>Ofertas Recibidas</h2>
                            <div id="incomingOffers"></div>
                        </div>
                    </div>
                </div>
                
                <!-- T√ÅCTICAS -->
                <div id="tactics" class="section">
                    <h1>üéØ T√°cticas y Alineaci√≥n</h1>
                    <div class="grid-2">
                        <div>
                            <h2>Formaci√≥n</h2>
                            <select id="formationSelect" onchange="updateFormation()" style="width: 100%; margin: 10px 0; padding: 10px;">
                                <option value="433">4-3-3 Equilibrada</option>
                                <option value="442">4-4-2 Cl√°sica</option>
                                <option value="352">3-5-2 Ofensiva</option>
                                <option value="541">5-4-1 Defensiva</option>
                                <option value="451">4-5-1 Mixta</option>
                            </select>
                        </div>
                        <div>
                            <h2>Mentalidad</h2>
                            <select id="mentalitySelect" onchange="updateMentality()" style="width: 100%; margin: 10px 0; padding: 10px;">
                                <option value="defensive">Defensiva</option>
                                <option value="balanced">Equilibrada</option>
                                <option value="offensive">Ofensiva</option>
                            </select>
                        </div>
                    </div>
                    <h2>Alineaci√≥n Inicial</h2>
                    <table id="lineupTable"></table>
                </div>
                
                <!-- FINANZAS -->
                <div id="finance" class="section">
                    <h1>üíº Finanzas</h1>
                    <div class="grid-2">
                        <div class="card">
                            <div class="card-title">Ingresos Semanales</div>
                            <div class="card-value" id="weeklyIncome">0‚Ç¨</div>
                        </div>
                        <div class="card">
                            <div class="card-title">Gastos Semanales</div>
                            <div class="card-value negative" id="weeklyExpenses">0‚Ç¨</div>
                        </div>
                    </div>
                    <h2>Fuentes de Ingresos</h2>
                    <table>
                        <tr><th>Concepto</th><th>Cantidad</th></tr>
                        <tr><td>Derechos TV</td><td id="tvRights">5000‚Ç¨</td></tr>
                        <tr><td>Patrocinios</td><td id="sponsorship">3000‚Ç¨</td></tr>
                        <tr><td>Venta de Entradas</td><td id="ticketSales">2000‚Ç¨</td></tr>
                    </table>
                    <h2>Gastos Principales</h2>
                    <table>
                        <tr><th>Concepto</th><th>Cantidad</th></tr>
                        <tr><td>Salarios Jugadores</td><td id="salaries">6000‚Ç¨</td></tr>
                        <tr><td>Mantenimiento</td><td id="maintenance">1000‚Ç¨</td></tr>
                        <tr><td>Otros Gastos</td><td id="otherCosts">500‚Ç¨</td></tr>
                    </table>
                </div>
                
                <!-- INSTALACIONES -->
                <div id="facilities" class="section">
                    <h1>üèüÔ∏è Instalaciones</h1>
                    <div class="grid-2">
                        <div class="card">
                            <div class="card-title">Estadio</div>
                            <div class="stat-row"><span>Capacidad:</span><span id="stadiumCap">50000</span></div>
                            <button class="btn" style="width: 100%; margin-top: 10px; font-size: 0.85em;">Expandir (+100.000‚Ç¨)</button>
                        </div>
                        <div class="card">
                            <div class="card-title">Centro de Entrenamiento</div>
                            <div class="stat-row"><span>Nivel:</span><span id="trainingLevel">3</span></div>
                            <button class="btn" style="width: 100%; margin-top: 10px; font-size: 0.85em;">Mejorar (+50.000‚Ç¨)</button>
                        </div>
                    </div>
                </div>
                
                <!-- STAFF -->
                <div id="staff" class="section">
                    <h1>üëî Personal del Club</h1>
                    <div class="grid-2">
                        <div class="card">
                            <div class="card-title">üè• M√©dico Principal</div>
                            <div class="stat-row"><span>Estado:</span><span style="color: var(--success);">Contratado</span></div>
                            <button class="btn btn-sm" style="width: 100%; margin-top: 10px; padding: 8px; font-size: 0.85em;">Cambiar</button>
                        </div>
                        <div class="card">
                            <div class="card-title">üß™ Entrenador F√≠sico</div>
                            <div class="stat-row"><span>Estado:</span><span style="color: var(--success);">Contratado</span></div>
                            <button class="btn btn-sm" style="width: 100%; margin-top: 10px; padding: 8px; font-size: 0.85em;">Cambiar</button>
                        </div>
                        <div class="card">
                            <div class="card-title">üé¨ Analista V√≠deo</div>
                            <div class="stat-row"><span>Estado:</span><span style="color: var(--danger);">No contratado</span></div>
                            <button class="btn btn-sm" style="width: 100%; margin-top: 10px; padding: 8px; font-size: 0.85em;">Contratar</button>
                        </div>
                        <div class="card">
                            <div class="card-title">üß† Scout</div>
                            <div class="stat-row"><span>Estado:</span><span style="color: var(--success);">Contratado</span></div>
                            <button class="btn btn-sm" style="width: 100%; margin-top: 10px; padding: 8px; font-size: 0.85em;">Cambiar</button>
                        </div>
                    </div>
                </div>
                
                <!-- PARTIDO -->
                <div id="match" class="section">
                    <h1>‚öΩ Pr√≥ximo Partido</h1>
                    <div class="card" id="nextMatchCard"></div>
                    <h2 style="margin-top: 30px;">Modo de Visualizaci√≥n</h2>
                    <div class="grid-2">
                        <button class="btn" onclick="playMatch('result')">‚è© Solo Resultado</button>
                        <button class="btn" onclick="playMatch('summary')">üìä Resumen</button>
                        <button class="btn" onclick="playMatch('interactive')">üéÆ Interactivo</button>
                        <button class="btn" onclick="playMatch('simulate')">ü§ñ Simulaci√≥n</button>
                    </div>
                </div>
                
                <!-- CLASIFICACI√ìN -->
                <div id="standings" class="section">
                    <h1>üìà Clasificaci√≥n Liga</h1>
                    <table>
                        <tr>
                            <th>Pos</th><th>Equipo</th><th>PJ</th><th>G</th><th>E</th><th>P</th><th>GF</th><th>GC</th><th>DG</th><th>Pts</th>
                        </tr>
                        <tbody id="standingsTable"></tbody>
                    </table>
                </div>
                
                <!-- MODO DE JUEGO -->
                <div id="gamemode" class="section">
                    <h1>üéÆ Selecciona Modo de Juego</h1>
                    <div class="grid-2">
                        <div class="card" style="cursor: pointer; padding: 30px; text-align: center;" onclick="startGameMode('manager')">
                            <div class="card-title" style="font-size: 1.3em;">üèÖ Liga Manager</div>
                            <p style="margin-top: 10px; color: #aaa;">Direcci√≥n indefinida de tu club. Sin despido por mal desempe√±o, solo por quiebra econ√≥mica.</p>
                        </div>
                        <div class="card" style="cursor: pointer; padding: 30px; text-align: center;" onclick="startGameMode('promanager')">
                            <div class="card-title" style="font-size: 1.3em;">üöÄ Liga Promanager</div>
                            <p style="margin-top: 10px; color: #aaa;">Comienza en Segunda B. Asciende y consigue ofertas de clubes mayores.</p>
                        </div>
                    </div>
                </div>
                
                <!-- CONFIGURACI√ìN -->
                <div id="settings" class="section">
                    <h1>‚öôÔ∏è Opciones</h1>
                    <h2>Guardar/Cargar Partida</h2>
                    <button class="btn" onclick="saveGame()">üíæ Guardar Partida</button>
                    <button class="btn" onclick="loadGame()">üìÇ Cargar Partida</button>
                    <h2 style="margin-top: 30px;">Datos</h2>
                    <button class="btn btn-danger" onclick="resetGame()">üîÑ Reiniciar Juego</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- MODALES -->
    <div id="newGameModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('newGame')">&times;</span>
            <h2>Selecciona tu Equipo</h2>
            <div id="teamList" style="margin-top: 20px; max-height: 400px; overflow-y: auto;"></div>
        </div>
    </div>
    
    <div id="signPlayerModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('signPlayer')">&times;</span>
            <h2>Fichar Jugador</h2>
            <div class="form-group" style="margin-top: 20px;">
                <label>B√∫squeda:</label>
                <input type="text" id="playerSearch" placeholder="Nombre del jugador" style="width: 100%; padding: 10px;">
            </div>
            <div id="availablePlayers" style="margin-top: 20px; max-height: 300px; overflow-y: auto;"></div>
        </div>
    </div>

    <script>
        // DATOS GLOBALES
        const teams = [
            'Real Madrid', 'FC Barcelona', 'Atl√©tico Madrid', 'Athletic Club', 'Villarreal CF',
            'Real Sociedad', 'Real Betis', 'Valencia CF', 'Girona FC', 'Real Mallorca',
            'Las Palmas', 'Rayo Vallecano', 'Sevilla FC', 'Osasuna', 'Celta de Vigo',
            'Real Oviedo', 'RCD Espa√±ol', 'Real Valladolid', 'Levante UD', 'Real Elche CF'
        ];
        
        let gameState = {
            team: null,
            week: 1,
            balance: 100000,
            squad: [],
            gameMode: null,
            season: '2025/26',
            standings: {},
            matchHistory: []
        };
        
        // FUNCIONES PRINCIPALES
        function switchSection(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.sidebar-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
        }
        
        function showModal(type) {
            if (type === 'newGame') {
                document.getElementById('newGameModal').classList.add('active');
                renderTeamList();
            } else if (type === 'signPlayer') {
                document.getElementById('signPlayerModal').classList.add('active');
                renderAvailablePlayers();
            }
        }
        
        function closeModal(type) {
            if (type === 'newGame') document.getElementById('newGameModal').classList.remove('active');
            if (type === 'signPlayer') document.getElementById('signPlayerModal').classList.remove('active');
        }
        
        function renderTeamList() {
            const list = document.getElementById('teamList');
            list.innerHTML = teams.map(team => `
                <div style="padding: 10px; margin: 5px 0; background: rgba(255, 107, 53, 0.1); border-radius: 5px; cursor: pointer;" onclick="selectTeam('${team}')">
                    ${team}
                </div>
            `).join('');
        }
        
        function selectTeam(team) {
            gameState.team = team;
            gameState.standings = initStandings();
            gameState.squad = [];
            document.getElementById('navTeam').textContent = team;
            closeModal('newGame');
            switchSection('dashboard');
            updateDisplay();
        }
        
        function initStandings() {
            const standings = {};
            teams.forEach(team => {
                standings[team] = { pts: 0, pj: 0, g: 0, e: 0, p: 0, gf: 0, gc: 0 };
            });
            return standings;
        }
        
        function updateDisplay() {
            document.getElementById('navTeam').textContent = gameState.team || 'Selecciona equipo';
            document.getElementById('navWeek').textContent = gameState.week;
            document.getElementById('dashPos').textContent = getTeamPosition();
            document.getElementById('dashPts').textContent = gameState.standings[gameState.team]?.pts || 0;
            document.getElementById('dashPJ').textContent = gameState.standings[gameState.team]?.pj || 0;
            document.getElementById('dashBalance').textContent = gameState.balance + '‚Ç¨';
            document.getElementById('dashPlayers').textContent = gameState.squad.length;
            
            renderStandings();
            renderSquad();
            renderNextMatch();
        }
        
        function getTeamPosition() {
            const sorted = Object.entries(gameState.standings).sort((a, b) => b[1].pts - a[1].pts);
            return sorted.findIndex(([name]) => name === gameState.team) + 1 || '-';
        }
        
        function renderStandings() {
            const tbody = document.getElementById('standingsTable');
            const sorted = Object.entries(gameState.standings).sort((a, b) => b[1].pts - a[1].pts);
            tbody.innerHTML = sorted.map(([team, stats], i) => `
                <tr style="${team === gameState.team ? 'background: rgba(255, 107, 53, 0.2);' : ''}">
                    <td>${i + 1}</td>
                    <td>${team}</td>
                    <td>${stats.pj}</td>
                    <td>${stats.g}</td>
                    <td>${stats.e}</td>
                    <td>${stats.p}</td>
                    <td>${stats.gf}</td>
                    <td>${stats.gc}</td>
                    <td>${stats.gf - stats.gc}</td>
                    <td style="color: var(--primary); font-weight: bold;">${stats.pts}</td>
                </tr>
            `).join('');
        }
        
        function renderSquad() {
            const list = document.getElementById('squadList');
            if (gameState.squad.length === 0) {
                list.innerHTML = '<p style="color: #aaa;">No hay jugadores. Ficha algunos para comenzar.</p>';
                return;
            }
            list.innerHTML = gameState.squad.map(p => `
                <div class="player-card">
                    <div style="color: var(--primary); font-weight: bold;">${p.name}</div>
                    <div class="player-info">
                        <div><span style="color: #aaa;">Edad:</span> ${p.age}</div>
                        <div><span style="color: #aaa;">Nivel:</span> ${p.overall}/100</div>
                        <div><span style="color: #aaa;">Posici√≥n:</span> ${p.position}</div>
                        <div><span style="color: #aaa;">Salario:</span> ${p.salary}‚Ç¨/sem</div>
                    </div>
                </div>
            `).join('');
        }
        
        function renderNextMatch() {
            const nextRival = teams[Math.floor(Math.random() * teams.length)];
            document.getElementById('nextMatchCard').innerHTML = `
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 1.2em; margin: 15px 0;"><strong>${gameState.team}</strong></div>
                    <div style="color: #aaa; margin: 10px 0;">vs</div>
                    <div style="font-size: 1.2em; margin: 15px 0;"><strong>${nextRival}</strong></div>
                    <div style="color: #aaa; font-size: 0.9em; margin-top: 15px;">Jornada ${gameState.week}</div>
                </div>
            `;
        }
        
        function renderAvailablePlayers() {
            const players = generateAvailablePlayers();
            const div = document.getElementById('availablePlayers');
            div.innerHTML = players.map(p => `
                <div style="padding: 10px; margin: 5px 0; background: rgba(255, 107, 53, 0.1); border-radius: 5px; display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <div style="font-weight: bold;">${p.name}</div>
                        <div style="font-size: 0.85em; color: #aaa;">${p.position} | ${p.age} a√±os | Nivel ${p.overall}</div>
                    </div>
                    <button class="btn btn-sm" onclick="signPlayer('${p.name}', ${p.salary}, '${p.position}', ${p.overall}, ${p.age})" style="padding: 8px 12px;">Fichar</button>
                </div>
            `).join('');
        }
        
        function generateAvailablePlayers() {
            const positions = ['POR', 'DEF', 'CED', 'LAT', 'MED', 'EXT', 'DEL'];
            const names = ['Cristiano', 'Lewandowski', 'Mbapp√©', 'Rodri', 'Alaba', 'Courtois', 'Benzema', 'Vinicius', 'Bellingham', 'Haaland', 'Saka', 'Mart√≠nez', 'Piqu√©', 'Gavi', 'Pedri', 'Auba', 'Torres', 'Frenkie', 'Semedo', 'Ospina'];
            return names.slice(0, 15).map((name, i) => ({
                name,
                position: positions[i % positions.length],
                age: 20 + Math.floor(Math.random() * 15),
                overall: 65 + Math.floor(Math.random() * 25),
                salary: 2000 + Math.floor(Math.random() * 8000)
            }));
        }
        
        function signPlayer(name, salary, pos, ovr, age) {
            if (gameState.balance < salary * 4) {
                alert('No tienes suficiente dinero. Se requieren ' + (salary * 4) + '‚Ç¨');
                return;
            }
            gameState.squad.push({ name, salary, position: pos, overall: ovr, age, goals: 0, assists: 0 });
            gameState.balance -= salary * 4;
            closeModal('signPlayer');
            updateDisplay();
            alert('¬°' + name + ' fichado exitosamente!');
        }
        
        function playMatch(mode) {
            const rival = teams[Math.floor(Math.random() * teams.length)];
            const myGoals = Math.floor(Math.random() * 5);
            const rivalGoals = Math.floor(Math.random() * 5);
            
            // Actualizar estad√≠sticas
            gameState.standings[gameState.team].pj++;
            gameState.standings[rival].pj++;
            gameState.standings[gameState.team].gf += myGoals;
            gameState.standings[gameState.team].gc += rivalGoals;
            gameState.standings[rival].gf += rivalGoals;
            gameState.standings[rival].gc += myGoals;
            
            if (myGoals > rivalGoals) {
                gameState.standings[gameState.team].pts += 3;
                gameState.standings[gameState.team].g++;
                gameState.standings[rival].p++;
            } else if (myGoals < rivalGoals) {
                gameState.standings[rival].pts += 3;
                gameState.standings[rival].g++;
                gameState.standings[gameState.team].p++;
            } else {
                gameState.standings[gameState.team].pts += 1;
                gameState.standings[gameState.team].e++;
                gameState.standings[rival].pts += 1;
                gameState.standings[rival].e++;
            }
            
            // Historial
            gameState.matchHistory.push({
                week: gameState.week,
                home: gameState.team,
                away: rival,
                score: `${myGoals}-${rivalGoals}`,
                mode
            });
            
            gameState.week++;
            
            // Ingresos por partido
            gameState.balance += 5000;
            
            alert(`Resultado: ${gameState.team} ${myGoals} - ${rivalGoals} ${rival}`);
            updateDisplay();
        }
        
        function updateFormation() {
            const formation = document.getElementById('formationSelect').value;
            alert('Formaci√≥n establecida: ' + formation);
        }
        
        function updateMentality() {
            const mentality = document.getElementById('mentalitySelect').value;
            alert('Mentalidad: ' + mentality);
        }
        
        function startGameMode(mode) {
            gameState.gameMode = mode;
            if (mode === 'promanager') {
                gameState.team = 'Equipo Segunda B'; // Simplificado
                gameState.balance = 50000;
            }
            switchSection('dashboard');
            updateDisplay();
        }
        
        function saveGame() {
            localStorage.setItem('pcfutbol-save', JSON.stringify(gameState));
            alert('Partida guardada correctamente');
        }
        
        function loadGame() {
            const saved = localStorage.getItem('pcfutbol-save');
            if (saved) {
                gameState = JSON.parse(saved);
                updateDisplay();
                alert('Partida cargada');
            } else {
                alert('No hay partida guardada');
            }
        }
        
        function resetGame() {
            if (confirm('¬øReiniciar completamente?')) {
                gameState = { team: null, week: 1, balance: 100000, squad: [], gameMode: null, season: '2025/26', standings: {}, matchHistory: [] };
                switchSection('gamemode');
                updateDisplay();
            }
        }
        
        // Iniciar
        switchSection('gamemode');
    </script>
</body>
</html>
